<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="http://toothcare:8888/styles.css">
    <script src="https://code.jquery.com/jquery-3.6.0.js"
        integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
</head>

<body>

    <div class="container-main container">
        <div class="servises-screen-wrap">
            <button class="container button" onclick="window.location='../'">
                <div>Назад</div>
            </button>
            <div class='servises-list'>
                <div class="col">
                    <div class="container center">
                        <div>Услуги</div>
                    </div>
                    <div class="col-list col-list-servises">

                    </div>
                </div>
                <div class='divider'></div>
                <div class="col">
                    <div class="container center">
                        <div>Товары</div>
                    </div>
                    <div class="col-list col-list-products">

                    </div>
                </div>

            </div>
        </div>
    </div>
</body>

<script type="module">
    import { useFetch } from "./../requests.js"
    const { api } = useFetch()

    let data = []
    let products = [];
    let servises = [];

    const setList = () => {
        // col-list-servises
        // col-list-products

        const htmlServises = servises.map((servise) => {
            return `<div class="servise servise-${servise.id}">
                        <div class='col-list-left'>
                            <div>
                                ${servise.name}
                            </div>
                        </div>
                        <div class='col-list-right'>
                            <div>
                                ${servise.price} руб.
                            </div>
                        </div>
                    </div>`;
        });

        htmlServises.forEach(element => {
            $(".col-list-servises").append(element)
        });

        const htmlProducts = products.map((product) => {
            return `<div class="product product-${product.id}">
                        <div class='col-list-left'>
                            <div>
                                ${product.name}
                            </div>
                        </div>
                        <div class='col-list-right'>
                            <div>
                                ${product.price} руб.
                            </div>
                        </div>
                    </div>`;
        });

        htmlProducts.forEach(element => {
            $(".col-list-products").append(element)
        });
    }

    const docReady = async () => {
        data = await api.getServises().then((res) => res);

        products = data.products
        servises = data.servises

        setList()
    }
    docReady()
</script>